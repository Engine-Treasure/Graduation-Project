# 模因作曲

Enrique Muñoz, Member, IEEE, Jose Manuel Cadenas, Senior Member, IEEE, Yew Soon Ong, Senior Member, IEEE, and Giovanni Acampora, Senior Member, IEEE

*摘要*──计算机与人工智能在艺术创作中扮演着关键角色，通过设计人造代理，能够再现人类艺术家高品质的艺术品，比如绘画与雕塑。在这方面，音乐作曲代表了能够从计算智能中极大获益的艺术学科之一，近年来在该领域进行的大量研究就是最好的证明。然而，由于人类音乐家的天才与能力，自动作曲还远远不能完美地演艺。本文通过提出一个有效的、基于音乐方法的旋律生成智能方案，减少了人类与机器作曲之间的差距。该方法受到人类作曲技巧：非数字低音技术的启发。特别地，我们将作曲技术表示成一个优化问题，并利用包含各种元启发式的自适应多代理模因方法求解它。作曲代理以低音线作为输入，协作创作高品质的音乐片段。一系列基于巴赫四音合唱的实验研究表明，不同优化策略的混合表现比传统的混合进化算法更好。

*关键词*──自适应模因算法，自动作曲，多代理系统

## 一、简介

历史上，人工智能与计算智能方法学已经普遍应用于艺术家/科学家的创作与科研活动。其中一个引人注目的成就包括人造代理的设计，其目标是再现人类艺术家创作高品质艺术品的技艺，比如绘画和雕塑等等。这项技术，称为计算机艺术，它代表了计算机应用领域的一个真正的历史性突破，因为它第一次试图复制纯粹的、人类所独有的能力：创造力。自从1965年，第一次计算机艺术展在纽约和斯图加特同时举行，人们已经在实现所谓的创造性算法方面取得了许多进步，以支持（替代）艺术家的创作。

如今，人工智能已经涵盖了大量艺术创作。其中，音乐是将智能方法应用于数据处理并能从中极大获益的代表性艺术学科，正如过去几十年间在该领域进行的大量研究所见证的（见第二节 B）。事实上，对于解决不同音乐问题的研究工作可能可以追溯到计算机时代之前，比如：记谱程序、声音合成、实时演艺、数字乐器等等^[1]。然而，在这些音乐问题中，算法（自动）作曲，对于计算机科学家和音乐家而言绝对都是最迷人的。事实上，许多不同的计算机技术都已经应用于该极具挑战性的领域：随机数，正式乐理语法，自动划分，分形等等。特别地，近来^[2]，进化音乐被认为是一种新形式的计算机艺术方法，其重点在于通过进化算法（EA）来评估以及演化给定的音乐作品。因此，基于遗传算法（GA），遗传编程，粒子群优化（PSO）以及进化策略的音乐作曲技术，在计算机艺术领域得到越来越普遍的应用，并生成一些有趣的结果^[3]。

尽管如此，由于两个关键性问题，基于进化方法的自动作曲距离完善还很遥远：1）人为再现人类作曲家的天才能力的巨大挑战，2）对自动生成的旋律作美学评价的困难性。这些难点在生成技术上具有极大的相关性，比如非数字低音技术，人类作曲家为低音创造旋律，而不需要指定复调或和弦，演奏者即兴演奏这些和弦（次中音，中音，高音）以更好地调整演奏出整段音乐的和谐。

本文的研究旨在提高进化算法在自动生成音乐旋律方面的能力，通过引入一个多代理系统，其包含了联合适应模因，解决了非数字低音合成技术在创作技巧与美学评估方面的缺陷。从科学的角度讲，基因指示蛋白质的合成，而模因是包含执行指令的基因的社会文化等价物^[4]。受大自然的启发，此处，模因被建模为指定搜索过程的指令。特别地，我们的系统拥有基于种群和基于局部的元启发式的模因集合，此处标记为模因作曲代理，使用基于模糊决策树（FDT）的机会学习机制，能够评估每个作曲代理在生成其独有的非数字低音的强度和成熟度。在执行学习和作曲过程中，每个模因作曲代理运用基于著名的和谐规则^1的创新音乐适应函数，这使得每个代理能够以精准正式的方式评估其生成的音乐作品。接着，作曲代理间使用挖掘得到的知识来合作交换信息，以有效地探索三音旋律的线间空白并进行乐曲合成，这样得到的乐曲明显优于从单个作曲代理处获得的原始乐曲^2。同时，模因间的协作与竞争（为固定的访问）促进了搜索过程中音乐片段的形成（不可能由单个作曲代理得到）。

如将在实验结果部分所示的，不同模因或元启发策略间的协作，允许我们的人造作曲代理对由传统的、最先进的（混合或非混合）进化算法获得的著名的巴赫四音生成曲，生成改进的解决方案并提高性能。

本文的余下部分安排如下。第二部分，是关于模因算法（MA）和进化音乐的简短报告。第三部分，展示了如何将音乐作曲的非数字低音技术建模成一个优化问题。之后，在第四步分，展示了自适应模式作曲。接下来，第五部分，展示了由提出的模因音乐作曲家（MMC）得到的结果，以及其相对于传统进化音乐技术的优越性。最后，第六部分，得出结论。附录介绍了一些理解数字化低音问题的必要的音乐概念。

## 二、相关工作

本节简短地介绍了近年来与模因方法和进化音乐相关的研究活动。

### A. MA 简介

MA 是旨在为复杂和困难的优化问题寻找解决方案的元启发式算法^[6]。它是传统进化算法的扩展，其搜索策略包含了局部搜索优化阶段。MA 的出现是为了解决进化算法的一些固有问题，进化算法通常由于未能利用局部信息，而导致要找到一个精确的解决方案，收敛速度极慢。这通常就限制了 EA 在许多计算时间是关键的考虑因素的大规模现实问题上的实用性。

从优化的角度来看^[7]，MA 已经被证明更高效（比如，要求使用较少的评估来找出最优解），同时其效果在多个问题领域较传统 EA 更好（比如，找出更优的解）。以结果论，MA 正被越来越广泛地接受，特别是在众所周知的组合优化问题中。一些组合优化问题已经通过 MA 解决，得到了最优解，而使用其他元启发式方法并不能得出可比较的结果。Krasnogor 和 Smith ^[7] 通过收集 MA 在许多著名的组合优化问题的应用，对该领域作了完整的回顾。

然而，尽管 MA 得出的结论很有趣，设计有效且高效的 MA 的过程依旧存在缺陷。比如说，其控制参数微调的困难，这可能需要广泛的测试，具体地，找到一个适合指定问题的模因很困难^[8]。 事实上，模因的选择会严重影响 MA 搜索的性能^[9]。这一点已经导致了研究界开发行为能够适应待解决问题特性的 MA，以获得第三代 MA 或自适应 MA。Ong 等人 ^[10] 展示了自适应 MA 的分类和比较。

### B. 自动作曲和进化音乐

旋律的自动生成是计算机艺术领域最具挑战性的问题之一，它几乎与计算机本身一样古老：《伊利亚克组曲》^[11]，^[12] 是由计算机程序生成的音乐片段，其可以追溯到 1957 年，第一台计算机问世的几年之后。本节，我们将对自动作曲作一个简要回顾，并将重点关注基于进化策略的方法。该领域研究现状的完整回顾已经超出了本文的范畴。感兴趣的读者可以参考参考文献 [13] 和 [14]，作更详细的调查。

过去的几年间，数个进化方法被提出，其中一些成功地被应用于生成悦耳的音乐片段。比如说，一个基于遗传算法的自动作曲工具 *GenDash* 已经被著名的美国作曲家 Waschka 二世 [15]，[16] 用于他的现场表演。其他用于作曲的遗传方法被提出：Jacob 的系统 [17]，[18] 介绍了一个基于“耳朵”模型的 GA，用于聆听与评估生成的旋律；相反地，Waschka 的系统，完全忽略了适应度评估的阶段。*GaMusic* [19] 是一个基于美学 GA 自动合成双八度音阶旋律的进化系统。Johanson 和 Poli [20] 展示了 GP-Music 系统，这是一个能根据导师的偏好与系统自身的自主方法演化短旋律序列的遗传编程方法。Spector 和 Alpern [21]，[22] 提出了 *GenBebop*，这是一个生成即兴短爵士的系统，即所谓的“trading fours”，即兴演奏四个小节以回应另一个表演者刚刚演奏的四个小节。Biles 探讨了一个类似的方法 [23]-[26]，并设计了 *GenJam*，一个基于 GA 的交互式系统，也是即兴演奏 trading four。在这之后，Thywissen [27] 设计了 *GenNotator*，一个混合算法的计算机辅助作曲工具。Gibson 和 Byrne [28] 介绍了一个生成全音阶，四部和声的短音乐片段的系统。这个系统叫做 NEUROGEN，其利用 GA 生成音乐，利用神经网络去评估生成结果的品质。Unemi [29]，[30] 创造了 SBEAT，一个交互式系统，在具有各种节奏、音高和音速的音乐模式中选择生成乐句（比如，节奏模式）。Ralley 提出了另一个基于交互式 GA 的旋律演化建议。

这里关注一下 De Prisco 和 Zaccagnino [45]，因为他们试图用 GA 解决数字低音问题。然而，他们并没有用数学的方法将搜索形式化为优化问题。此外，我们提出的进化方法包括了各种元启发式自适应模因代理，比之简单的 GA，能够更有效且高效地发现高品质且创造性的解决方案。特别地，我们的方法采用在线搜索过程中先验执行的元启发式自动提取的知识，因此，能够很好地自适应待解实例。更深入地说，与单个模因代理相比，采用协作与竞争的模式，能取得更好的结果，并促进创意音乐片段的生成，而这在仅采用单个模因代理的情况是无法实现的。

### 非数字低音作曲作为 NP 难搜索问题

本节，提供了非数字低音技术形式化表示为 NP 难优化问题的方法。如前所述，人类作曲家可以使用非数字低音技术创作低音旋律，但他/她又不必指定和声，比如，对应其他三个音：1）次中音；2）中音；3）高音；然后，演奏乐曲的时候，表演者需要即兴演奏和弦^3以保证乐段的和谐。因此，这项作曲技术视为一个优化问题，以一个给定的低音线作为输入，生成最合适的（美学上的）三个音，完成一个四音节。

然而，因为没有关于完成四音节所需的三个音节的先验知识，将非数字低音技术形式化地建模为优化问题，并通过进化进化求解它是相当困难度。事实上，缺少这样的信息，要创建可行解的初始种群是不可能的。因此，用数字标出低音部，对于获取给定低音线的合适初始三音节知识，从而最终将自动作曲定义为拥有其适应函数和约束条件的优化问题是必要的。

图 1 是我们提出的作曲过程的一个例子：（a）表示输入（低音线）；（b）标出了和谐音符（称为 HN）；（c）添加了指示最恰当旋律（生成步骤）的符号；（d）展示了最终的解，比方说，使用进化方法求得。

### A. 标注低音部步骤：从非数字到数字低音

标注低音的步骤决定了给定的输入低音线中哪些和弦能够产生最动听的旋律。从优化的角度来看，这个步骤缩小了搜索空间，根据传统和谐规则，将搜索空间从一个包含由低音线得出的所有可能和弦的空间，缩小为一个子集，该子集中的和弦能够产生更好的最终乐曲。准确地说，标注低音步骤是动态规划实现的。

然而，并非所有低音线上的音符都在标注低音步骤的考虑范围内。在标注低音步骤中，分析得到的音符子集，由输入的低音线中的音符决定，同时，生成的节奏的节拍长度，也由低音线决定。节奏通常由时间节拍来指定^n_b \_b_l（图 1 所示的例子，^n_b \_b_l 为 ^4 \_4)，其中，n\_b 表示拍子，b\_l 表示长度。特别地，我们使用基本时间单元作为一个拍子的长度。一个节拍中所有的音符都显示在标注低音中。我们也允许音符的长度超过拍子的长度（事实上，大多都是如此）。但是，如果一个输入音符短于拍子长度，那么，我们仅在音符处于节拍上时才考虑它（否则，忽略它）。我们通过 HN 来指定需要做低音标注的音符。

因此，在低音标注步骤中，我们通过为和弦集中的两个连续音符的和弦赋予权重，来为低音线中每个 HN 选择最合适的和弦。这些权重代表著名的和谐规则，表示哪些和弦序列更和谐（见[36]）。那些更普通的和弦序列将被赋予更大的权值，其他的则赋更低的权值。注意，序列中前一个和弦的修改，会改变当前和弦的权值。

我们使用以下标准为每对连续的 HN 分配权值，其中 c_1 和 c_2 分别代表序列中第一个和第二个 HN 的和弦：

1）c_1 和 c_2 是相同的主音调和弦。权重的赋值见表 1。
2）c_1 和 c_2 是相同的小调和弦。权重的赋值见表 2。
3）c_1 和 c_2 是从一个主音调到另一个主音调，或从一个小调到另一个小调。权重的赋值见表 3。
4）c_1 和 c_2 是从一个主音调到一个小调，或从一个小调到一个主音调。权重的赋值见表 4。

我们使用动态规划的方法（见算法 1）来计算最合适的

